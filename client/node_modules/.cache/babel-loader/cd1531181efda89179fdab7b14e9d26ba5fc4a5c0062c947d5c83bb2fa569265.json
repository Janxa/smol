{"ast":null,"code":"var _jsxFileName = \"/home/janxa/Bureau/Projets/Smol/smol/client/src/components/popups/Contact.jsx\",\n  _s = $RefreshSig$();\nimport React, { Component } from \"react\";\nimport { toast } from 'react-toastify';\nimport { useEffect, useState } from \"react\";\nimport { contact_schema } from \"../../joi_schemas/contact_schema\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Contact(props) {\n  _s();\n  const Joi = require(\"joi\");\n  const [mail_sender, setmail_sender] = useState(\"\");\n  const [mail_content, setmail_content] = useState(\"\");\n  const [errors, setErrors] = useState({});\n  const schema = contact_schema;\n  const sendEmail = async event => {\n    let new_errors = {};\n    event.preventDefault();\n    try {\n      await schema.validateAsync({\n        mail_sender: mail_sender,\n        mail_content: mail_content\n      }, {\n        abortEarly: false\n      });\n      const res = await toast.promise(axios.post(\"/api/contact/send\", {\n        mail_content,\n        mail_sender\n      }), {\n        pending: 'Loading',\n        success: 'ðŸ“§ Your email has been sent !',\n        error: 'ðŸ¤¯ Error, could not send email '\n      });\n      console.log(res);\n      setmail_sender(\"\");\n      setmail_content(\"\");\n      props.ClosePopup();\n    } catch (err) {\n      console.log(err);\n      err.details.forEach(error => new_errors[error.context.label] = error.message);\n      setErrors(new_errors);\n    }\n  };\n\n  // might implement real time error handling\n  useEffect(() => {\n    console.log(\"error\", errors);\n  });\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: sendEmail,\n    className: \"[&>*]:p-1 flex flex-col w-full h-full overflow-hidden p-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-2xl font-medium text-primary-brown-2\",\n      children: \"Contact\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Any question ? Send me an e-mail through this form and i'll answer you asap !\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      for: \"mail_sender\",\n      title: \"So I can answer your mail !\",\n      children: \"Your email adress :\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      className: errors[\"mail_sender\"] ? \"input-invalid\" : \"input\",\n      type: \"text\",\n      name: \"mail_sender\",\n      id: \"mail_sender\",\n      value: mail_sender,\n      onChange: e => setmail_sender(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), errors[\"mail_sender\"] && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-label\",\n      children: errors[\"mail_sender\"]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 33\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      for: \"contact_message\",\n      title: \"Cant exceed 10 000 characters\",\n      children: \"Your Message :\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      className: errors[\"mail_sender\"] ? \"input-invalid\" : \"input\",\n      name: \"contact_message\",\n      id: \"contact_message\",\n      cols: \"30\",\n      rows: \"10\",\n      value: mail_content,\n      onChange: e => setmail_content(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), errors[\"mail_content\"] && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-label\",\n      children: errors[\"mail_content\"]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 34\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"submit\",\n      value: \"Send Email !\",\n      className: \"btn-validation mt-2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 4\n  }, this);\n}\n_s(Contact, \"OiLDCMLQB58l3NEdH2xDbzp6jQQ=\");\n_c = Contact;\nexport default Contact;\nvar _c;\n$RefreshReg$(_c, \"Contact\");","map":{"version":3,"names":["React","Component","toast","useEffect","useState","contact_schema","axios","Contact","props","Joi","require","mail_sender","setmail_sender","mail_content","setmail_content","errors","setErrors","schema","sendEmail","event","new_errors","preventDefault","validateAsync","abortEarly","res","promise","post","pending","success","error","console","log","ClosePopup","err","details","forEach","context","label","message","e","target","value"],"sources":["/home/janxa/Bureau/Projets/Smol/smol/client/src/components/popups/Contact.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport {  toast } from 'react-toastify';\nimport { useEffect,useState} from \"react\";\nimport { contact_schema } from \"../../joi_schemas/contact_schema\"\nimport axios from \"axios\";\n\nfunction Contact(props) {\n  const Joi = require(\"joi\");\n  const [mail_sender,setmail_sender]= useState(\"\")\n  const [mail_content,setmail_content]= useState(\"\")\n  const [errors,setErrors]=useState({})\n  const schema = contact_schema;\n\n  const sendEmail= async (event)=>{\n    let new_errors= {}\n    event.preventDefault();\n    try {\n    await schema.validateAsync({mail_sender:mail_sender,mail_content:mail_content},{abortEarly:false});\n    const res = await toast.promise( axios.post(\"/api/contact/send\", {mail_content,mail_sender}),\n    {\n      pending: 'Loading',\n      success: 'ðŸ“§ Your email has been sent !',\n      error: 'ðŸ¤¯ Error, could not send email '\n    }\n);\n    console.log(res);\n    setmail_sender(\"\");\n    setmail_content(\"\");\n      props.ClosePopup();\n  }catch (err){\n    console.log(err)\n    err.details.forEach(\n       (error) => (new_errors[error.context.label] = error.message)\n      );\n    setErrors(new_errors);\n  }\n}\n\n  // might implement real time error handling\n   useEffect(()=>{\n    \n      console.log(\"error\", errors);\n     \n   }\n  )\n  return (\n   <form onSubmit={sendEmail} className=\"[&>*]:p-1 flex flex-col w-full h-full overflow-hidden p-2\" >\n      <h3 className=\"text-2xl font-medium text-primary-brown-2\">Contact</h3>\n      <p>Any question ? Send me an e-mail through this form and i'll answer you asap !</p>\n      <label for=\"mail_sender\" title=\"So I can answer your mail !\">Your email adress :</label>\n      <input className={errors[\"mail_sender\"] ? \"input-invalid\":\"input\"} type=\"text\"  name=\"mail_sender\" id=\"mail_sender\" value={mail_sender} onChange={(e) =>setmail_sender(e.target.value)} />\n      {errors[\"mail_sender\"] && <p className=\"error-label\">{errors[\"mail_sender\"]}</p>}\n\n      <label for=\"contact_message\" title=\"Cant exceed 10 000 characters\" >Your Message :</label>\n      <textarea className={errors[\"mail_sender\"] ? \"input-invalid\":\"input\"}\n        name=\"contact_message\"\n        id=\"contact_message\"\n        cols=\"30\"\n        rows=\"10\"\n        value={mail_content}\n        onChange={(e) =>setmail_content(e.target.value)}\n        \n      ></textarea>\n      {errors[\"mail_content\"] && <p className=\"error-label\">{errors[\"mail_content\"]}</p>}\n\n      <input type=\"submit\" value=\"Send Email !\" className=\"btn-validation mt-2\"/>\n\n    </form>\n      \n  );\n}\n\nexport default Contact;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}