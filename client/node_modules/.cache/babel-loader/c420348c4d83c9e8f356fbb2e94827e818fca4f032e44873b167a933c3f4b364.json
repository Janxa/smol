{"ast":null,"code":"import _regeneratorRuntime from\"/home/janxa/Bureau/Projets/Smol/smol/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/home/janxa/Bureau/Projets/Smol/smol/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/home/janxa/Bureau/Projets/Smol/smol/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{Component,useEffect,useRef}from\"react\";import axios from\"axios\";import UrlPairs from\"./UrlPairs\";import{withCookies}from\"react-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Sidebar(props){var url_list=props.url_list,setUrl_list=props.setUrl_list,cookies=props.cookies,visible=props.visible;var delete_url_from_list=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var new_url_list,deleted,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:new_url_list=_toConsumableArray(url_list);deleted=new_url_list.splice(id,1)[0];// trycatch here to check server before updating cookie\n_context.next=4;return axios.delete(\"/api/shortner/delete\",{data:deleted});case 4:res=_context.sent;setUrl_list(new_url_list);case 6:case\"end\":return _context.stop();}}},_callee);}));return function delete_url_from_list(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"aside\",{className:visible?\"opacity-100 fixed z-10 top-24 2xl:top-28 right-0 h-screen w-full translate-x-0 bg-stone-200 flex flex-col transition-[transform,opacity]  ease-in duration-300  p-4\":\"opacity-0 z-10 fixed  top-24 2xl:top-28  right-0  h-screen w-full  translate-x-full bg-stone-200 flex flex-col transition-[transform,opacity] ease-in duration-300 p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl  font-medium\",children:\"Your recent smol urls\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"flex flex-col h-full\",children:url_list.length>0?url_list.map(function(url_pair,id){return/*#__PURE__*/_jsxs(\"li\",{className:\" py-2 border-b-2 border-primary-brown-2\",children:[/*#__PURE__*/_jsx(UrlPairs,{data:url_pair}),/*#__PURE__*/_jsxs(\"div\",{className:\"pb-2 pt-3 flex justify-around w-2/3\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-validation\",onClick:null,children:\"Copy Smol url\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-danger\",onClick:function onClick(){return delete_url_from_list(id);},children:\"Delete url\"})]})]},id);}):/*#__PURE__*/_jsx(\"li\",{className:\" text-l pt-8 place-self-center\",children:\"No urls saved yet\"})})]});}export default withCookies(Sidebar);","map":{"version":3,"names":["React","Component","useEffect","useRef","axios","UrlPairs","withCookies","Sidebar","props","url_list","setUrl_list","cookies","visible","delete_url_from_list","id","new_url_list","deleted","splice","delete","data","res","length","map","url_pair"],"sources":["/home/janxa/Bureau/Projets/Smol/smol/client/src/components/Sidebar.jsx"],"sourcesContent":["import React, { Component,useEffect,useRef} from \"react\";\nimport axios  from \"axios\";\nimport UrlPairs from \"./UrlPairs\";\nimport { withCookies } from \"react-cookie\";\nfunction Sidebar(props) {\n  const {url_list,setUrl_list,cookies,visible} = props;\n\n  \n  const delete_url_from_list = async (id) => {\n    const new_url_list = [...url_list];\n    let deleted = new_url_list.splice(id, 1)[0];\n    \n    // trycatch here to check server before updating cookie\n    \n    const res = await axios.delete(\"/api/shortner/delete\", { data: deleted });\n    setUrl_list(new_url_list)\n    \n    \n  };\n\n\n  return (\n    <aside  className={visible \n      ? \"opacity-100 fixed z-10 top-24 2xl:top-28 right-0 h-screen w-full translate-x-0 bg-stone-200 flex flex-col transition-[transform,opacity]  ease-in duration-300  p-4\"\n      : \"opacity-0 z-10 fixed  top-24 2xl:top-28  right-0  h-screen w-full  translate-x-full bg-stone-200 flex flex-col transition-[transform,opacity] ease-in duration-300 p-4\"\n      }>\n\n      <h3 className=\"text-2xl  font-medium\">Your recent smol urls</h3>\n      <ul className=\"flex flex-col h-full\">\n        {/* If there's a url in the list, render list, else render no urls */}\n        {url_list.length >0 \n          ?(url_list.map((url_pair, id) => (\n            <li key={id} className=\" py-2 border-b-2 border-primary-brown-2\">\n              <UrlPairs data={url_pair} />\n              <div className=\"pb-2 pt-3 flex justify-around w-2/3\">\n              <button className=\"btn-validation\" onClick={null}>\n                Copy Smol url\n              </button>\n              <button className=\"btn-danger\" onClick={() => delete_url_from_list(id)}>\n                Delete url\n              </button>\n              </div>\n            </li>\n             )))\n         :<li className=\" text-l pt-8 place-self-center\">No urls saved yet</li>}\n\n      </ul>\n    </aside>\n  );\n}\n\nexport default withCookies(Sidebar);\n"],"mappings":"2ZAAA,MAAOA,MAAK,EAAIC,SAAS,CAACC,SAAS,CAACC,MAAM,KAAO,OAAO,CACxD,MAAOC,MAAK,KAAO,OAAO,CAC1B,MAAOC,SAAQ,KAAM,YAAY,CACjC,OAASC,WAAW,KAAQ,cAAc,CAAC,wFAC3C,QAASC,QAAO,CAACC,KAAK,CAAE,CACtB,GAAOC,SAAQ,CAAgCD,KAAK,CAA7CC,QAAQ,CAACC,WAAW,CAAoBF,KAAK,CAApCE,WAAW,CAACC,OAAO,CAAYH,KAAK,CAAxBG,OAAO,CAACC,OAAO,CAAIJ,KAAK,CAAhBI,OAAO,CAG3C,GAAMC,qBAAoB,4FAAG,iBAAOC,EAAE,iJAC9BC,YAAY,oBAAON,QAAQ,EAC7BO,OAAO,CAAGD,YAAY,CAACE,MAAM,CAACH,EAAE,CAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAE3C;AAAA,sBAEkBV,MAAK,CAACc,MAAM,CAAC,sBAAsB,CAAE,CAAEC,IAAI,CAAEH,OAAQ,CAAC,CAAC,QAAnEI,GAAG,eACTV,WAAW,CAACK,YAAY,CAAC,uDAG1B,kBAVKF,qBAAoB,4CAUzB,CAGD,mBACE,eAAQ,SAAS,CAAED,OAAO,CACtB,qKAAqK,CACrK,wKACD,wBAED,WAAI,SAAS,CAAC,uBAAuB,mCAA2B,cAChE,WAAI,SAAS,CAAC,sBAAsB,UAEjCH,QAAQ,CAACY,MAAM,CAAE,CAAC,CACfZ,QAAQ,CAACa,GAAG,CAAC,SAACC,QAAQ,CAAET,EAAE,qBAC1B,YAAa,SAAS,CAAC,yCAAyC,wBAC9D,KAAC,QAAQ,EAAC,IAAI,CAAES,QAAS,EAAG,cAC5B,aAAK,SAAS,CAAC,qCAAqC,wBACpD,eAAQ,SAAS,CAAC,gBAAgB,CAAC,OAAO,CAAE,IAAK,2BAExC,cACT,eAAQ,SAAS,CAAC,YAAY,CAAC,OAAO,CAAE,yBAAMV,qBAAoB,CAACC,EAAE,CAAC,EAAC,wBAE9D,GACH,GATCA,EAAE,CAUN,EACH,CAAC,cACL,WAAI,SAAS,CAAC,gCAAgC,+BAAuB,EAEpE,GACC,CAEZ,CAEA,cAAeR,YAAW,CAACC,OAAO,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}