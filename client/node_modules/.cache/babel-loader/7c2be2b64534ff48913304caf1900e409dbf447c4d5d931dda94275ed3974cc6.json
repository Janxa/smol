{"ast":null,"code":"import _regeneratorRuntime from\"/home/janxa/Bureau/Projets/Smol/smol/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/janxa/Bureau/Projets/Smol/smol/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/janxa/Bureau/Projets/Smol/smol/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/janxa/Bureau/Projets/Smol/smol/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/janxa/Bureau/Projets/Smol/smol/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Component,useState}from\"react\";import{url_schema}from\"../joi_schemas/url_schema\";import axios from\"axios\";import UrlPairs from\"./UrlPairs\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Joi=require(\"joi\");function UrlForm(props){var _useState=useState({url:\"\",alias:\"\",allowMod:false}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var schema=url_schema;var handleChange=function handleChange(_ref){var input=_ref.currentTarget;setData(function(data){return _objectSpread(_objectSpread({},data),{},_defineProperty({},input.name,input.value));});};var handleCheck=function handleCheck(_ref2){var checkBox=_ref2.currentTarget;setData(function(data){return _objectSpread(_objectSpread({},data),{},_defineProperty({},checkBox.name,!data.allowMod));});};var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var errors,lastUrl,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();errors={};lastUrl={};_context.prev=3;_context.next=6;return schema.validateAsync({url:data[\"url\"],alias:data[\"alias\"]},{abortEarly:false});case 6:_context.next=8;return axios.post(\"/api/shortner/generate\",data);case 8:res=_context.sent;props.add_url_to_list(res.data);lastUrl=res.data;props.setLastUrl(lastUrl);setData({url:\"\",alias:\"\",allowMod:false});_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](3);console.log(_context.t0);_context.t0.details.forEach(function(error){return errors[error.context.label]=error.message;});case 19:setErrors(errors);case 20:case\"end\":return _context.stop();}}},_callee,null,[[3,15]]);}));return function handleSubmit(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"section\",{className:\" bg-stone-200 w-10/12 p-4 m-4 rounded-md shadow-sm md:w-9/12 lg:w-2/3  \",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"url\",className:\"pt-2 text-lg lg:text-xl lg:pt-4 text-stone-900\",children:\"Enter the url you want to shorten :\"}),/*#__PURE__*/_jsx(\"input\",{className:errors['url']?\"input-invalid\":\"input\",value:data.url,onChange:handleChange,name:\"url\",type:\"text\"}),errors['url']&&/*#__PURE__*/_jsx(\"p\",{className:\"error-label\",children:errors[\"url\"]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"alias\",className:\"pt-2 lg:text-xl lg:pt-4 text-stone-900\",children:\"Customize your url :\"}),/*#__PURE__*/_jsx(\"input\",{className:errors['alias']?\"input-invalid\":\"input\",value:data.alias,onChange:handleChange,name:\"alias\",type:\"text\"}),errors['alias']&&/*#__PURE__*/_jsx(\"p\",{className:\"error-label\",children:errors[\"alias\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"py-2 z-0 relative\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"allowmod\",className:\"pt-2 text-stone-900 hover:cursor-help peer text-sm sm:text-base lg:text-lg \",children:\"Allow non-strict mode for custom-named urls \"}),/*#__PURE__*/_jsx(\"span\",{className:\" invisible peer-hover:visible opacity-0 peer-hover:opacity-100 duration-300   bg-stone-900 w-3/4 lg:w-1/2  py-1 px-2 text-center rounded-2xl text-white text-sm  transition-all ease-in absolute left-0 -top-full\",children:\"Add characters at the end of your url if your custom url has already been taken.\"}),/*#__PURE__*/_jsx(\"input\",{className:\"accent-primary-green\",type:\"checkbox\",name:\"allowMod\",checked:data.allowMod,onChange:handleCheck})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-validation z-0 self-center lg:text-lg\",type:\"submit\",children:\"Make it SMOL !\"})]})});}export default UrlForm;","map":{"version":3,"names":["React","Component","useState","url_schema","axios","UrlPairs","Joi","require","UrlForm","props","url","alias","allowMod","data","setData","errors","setErrors","schema","handleChange","input","currentTarget","name","value","handleCheck","checkBox","handleSubmit","event","preventDefault","lastUrl","validateAsync","abortEarly","post","res","add_url_to_list","setLastUrl","console","log","details","forEach","error","context","label","message"],"sources":["/home/janxa/Bureau/Projets/Smol/smol/client/src/components/UrlForm.jsx"],"sourcesContent":["import React, { Component, useState } from \"react\";\nimport { url_schema } from \"../joi_schemas/url_schema\";\nimport axios from \"axios\";\nimport UrlPairs from \"./UrlPairs\";\nconst Joi = require(\"joi\");\n\nfunction UrlForm(props) {\n  const [data,setData] = useState( { url: \"\", alias: \"\", allowMod: false });\n  const [errors,setErrors]=useState({})\n  const schema = url_schema;\n  const handleChange = ({ currentTarget: input }) => {\n    setData( (data)=>{\n      return{\n        ...data,\n        [input.name]:input.value\n      }\n    } );\n  };\n  const handleCheck = ({ currentTarget: checkBox }) => {\n    setData( (data)=>{\n      return{\n        ...data,\n        [checkBox.name]:!data.allowMod\n      }\n    } );\n\n  };\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    let errors = {};\n    let lastUrl = {};\n    try {\n      await schema.validateAsync(\n        {\n          url: data[\"url\"],\n          alias: data[\"alias\"],\n        },\n        { abortEarly: false }\n      );\n      const res = await axios.post(\"/api/shortner/generate\", data);\n      props.add_url_to_list(res.data);\n      lastUrl = res.data;\n      props.setLastUrl(lastUrl );\n      setData({ url: \"\", alias: \"\", allowMod: false })\n    } catch (err) {\n      console.log(err);\n      err.details.forEach(\n        (error) => (errors[error.context.label] = error.message)\n      );\n    }\n    setErrors(errors )\n  };\n  return ( \n    \n    <section className=\" bg-stone-200 w-10/12 p-4 m-4 rounded-md shadow-sm md:w-9/12 lg:w-2/3  \">\n   \n        <form onSubmit={handleSubmit} className=\"flex flex-col\">\n          <label htmlFor=\"url\" className=\"pt-2 text-lg lg:text-xl lg:pt-4 text-stone-900\">Enter the url you want to shorten :</label>\n          <input\n            className={errors['url'] ?\"input-invalid\" : \"input\"}\n            value={data.url}\n            onChange={handleChange}\n            name=\"url\"\n            type=\"text\"\n          />\n          {errors['url']  && <p className=\"error-label\">{errors[\"url\"]}</p>}\n          <label htmlFor=\"alias\" className=\"pt-2 lg:text-xl lg:pt-4 text-stone-900\">Customize your url :</label>\n          <input\n            className={errors['alias'] ? \"input-invalid\" :\"input\"}\n            value={data.alias}\n            onChange={handleChange}\n            name=\"alias\"\n            type=\"text\"\n            />\n            {errors['alias']&& <p  className=\"error-label\">{errors[\"alias\"]}</p>}\n          \n          <div className=\"py-2 z-0 relative\"> \n            <label htmlFor=\"allowmod\" className=\"pt-2 text-stone-900 hover:cursor-help peer text-sm sm:text-base lg:text-lg \">Allow non-strict mode for custom-named urls </label>\n            <span className=\" invisible peer-hover:visible opacity-0 peer-hover:opacity-100 duration-300   bg-stone-900 w-3/4 lg:w-1/2  py-1 px-2 text-center rounded-2xl text-white text-sm  transition-all ease-in absolute left-0 -top-full\">Add characters at the end of your url if your custom url has already been taken.</span>\n          <input\n            className=\"accent-primary-green\"\n            type=\"checkbox\"\n            name=\"allowMod\"\n            checked={data.allowMod}\n            onChange={handleCheck}\n          />\n          </div>\n         \n\n          <button className=\"btn-validation z-0 self-center lg:text-lg\"type=\"submit\">Make it SMOL !</button>\n        </form>\n      </section>\n    \n  );\n}\n\nexport default UrlForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}