{"ast":null,"code":"import _regeneratorRuntime from\"/home/janxa/Bureau/Projets/Smol/smol/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/janxa/Bureau/Projets/Smol/smol/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";var BASE_URL=process.env.REACT_APP_BASE_URL;var API_URL=process.env.REACT_APP_API_URL;function redirect(){return _redirect.apply(this,arguments);}function _redirect(){_redirect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,start,end,short_url,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"redirect called\");url=window.location.href;start=url.indexOf(BASE_URL);end=start+BASE_URL.length;short_url=url.substring(0,start-1)+url.substring(end);if(!(url!=BASE_URL)){_context.next=19;break;}_context.prev=6;_context.next=9;return axios.get(API_URL+'/api/redirect/'+short_url);case 9:res=_context.sent;window.location.replace(res.data);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](6);window.location.replace(BASE_URL);case 16:;_context.next=20;break;case 19:window.location.replace(BASE_URL);case 20:case\"end\":return _context.stop();}}},_callee,null,[[6,13]]);}));return _redirect.apply(this,arguments);}export default redirect;","map":{"version":3,"names":["axios","BASE_URL","process","env","REACT_APP_BASE_URL","API_URL","REACT_APP_API_URL","redirect","console","log","url","window","location","href","start","indexOf","end","length","short_url","substring","get","res","replace","data"],"sources":["/home/janxa/Bureau/Projets/Smol/smol/client/src/services/redirectService.js"],"sourcesContent":["import axios from \"axios\";\nconst BASE_URL = process.env.REACT_APP_BASE_URL;\nconst API_URL= process.env.REACT_APP_API_URL;\n\nasync function redirect(){\n    console.log(\"redirect called\")\n    let url = window.location.href;\n    let start = url.indexOf(BASE_URL);\n    let end = start + BASE_URL.length;\n    const short_url= url.substring(0, start - 1) + url.substring(end);\n\n    if (url != BASE_URL){\n        try{\n        const res= await axios.get(API_URL+'/api/redirect/'+short_url);\n        window.location.replace(res.data)\n        }catch (e) {\n            window.location.replace(BASE_URL);\n        };\n     }\n    else window.location.replace(BASE_URL);\n}\nexport default redirect;\n\n\n\n\n\n"],"mappings":"kRAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,GAAMC,SAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,CAC/C,GAAMC,QAAO,CAAEH,OAAO,CAACC,GAAG,CAACG,iBAAiB,CAAC,QAE9BC,SAAQ,oIAAvB,qKACIC,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC,CAC1BC,GAAG,CAAGC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAC1BC,KAAK,CAAGJ,GAAG,CAACK,OAAO,CAACd,QAAQ,CAAC,CAC7Be,GAAG,CAAGF,KAAK,CAAGb,QAAQ,CAACgB,MAAM,CAC3BC,SAAS,CAAER,GAAG,CAACS,SAAS,CAAC,CAAC,CAAEL,KAAK,CAAG,CAAC,CAAC,CAAGJ,GAAG,CAACS,SAAS,CAACH,GAAG,CAAC,MAE7DN,GAAG,EAAIT,QAAQ,iEAEED,MAAK,CAACoB,GAAG,CAACf,OAAO,CAAC,gBAAgB,CAACa,SAAS,CAAC,QAAxDG,GAAG,eACTV,MAAM,CAACC,QAAQ,CAACU,OAAO,CAACD,GAAG,CAACE,IAAI,CAAC,kFAE7BZ,MAAM,CAACC,QAAQ,CAACU,OAAO,CAACrB,QAAQ,CAAC,CAAC,QACrC,CAAC,+BAEDU,MAAM,CAACC,QAAQ,CAACU,OAAO,CAACrB,QAAQ,CAAC,CAAC,qEAC1C,2CACD,cAAeM,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}