{"ast":null,"code":"var _jsxFileName = \"/home/janxa/Bureau/Projets/Smol/smol/client/src/components/UrlForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { Component, useState } from \"react\";\nimport { url_schema } from \"../joi_schemas/url_schema\";\nimport axios from \"axios\";\nimport UrlPairs from \"./UrlPairs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Joi = require(\"joi\");\nfunction UrlForm(props) {\n  _s();\n  const [data, setData] = useState({\n    url: \"\",\n    alias: \"\",\n    allowMod: false\n  });\n  const [errors, setErrors] = useState({});\n  const schema = url_schema;\n  const handleChange = _ref => {\n    let {\n      currentTarget: input\n    } = _ref;\n    setData(data => {\n      return {\n        ...data,\n        [input.name]: input.value\n      };\n    });\n  };\n  const handleCheck = _ref2 => {\n    let {\n      currentTarget: checkBox\n    } = _ref2;\n    setData(data => {\n      return {\n        ...data,\n        [checkBox.name]: !data.allowMod\n      };\n    });\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    let errors = {};\n    let lastUrl = {};\n    try {\n      await schema.validateAsync({\n        url: data[\"url\"],\n        alias: data[\"alias\"]\n      }, {\n        abortEarly: false\n      });\n      const res = await axios.post(\"/api/shortner/generate\", data);\n      props.add_url_to_list(res.data);\n      lastUrl = res.data;\n      props.setLastUrl(lastUrl);\n      setData({\n        url: \"\",\n        alias: \"\",\n        allowMod: false\n      });\n    } catch (err) {\n      console.log(err);\n      err.details.forEach(error => errors[error.context.label] = error.message);\n    }\n    setErrors(errors);\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \" bg-stone-200 w-10/12 p-4 m-4 rounded-md shadow-sm md:w-9/12 lg:w-2/3  \",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"url\",\n        className: \"pt-2 text-lg lg:text-xl lg:pt-4 text-stone-900\",\n        children: \"Enter the url you want to shorten :\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: errors['url'] ? \"input-invalid\" : \"input\",\n        value: data.url,\n        onChange: handleChange,\n        name: \"url\",\n        type: \"text\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this), errors['url'] && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-label\",\n        children: errors[\"url\"]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 30\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"alias\",\n        className: \"pt-2 lg:text-xl lg:pt-4 text-stone-900\",\n        children: \"Customize your url :\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: errors['alias'] ? \"input-invalid\" : \"input\",\n        value: data.alias,\n        onChange: handleChange,\n        name: \"alias\",\n        type: \"text\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this), errors['alias'] && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-label\",\n        children: errors[\"alias\"]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 32\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"py-2 z-0 relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"allowmod\",\n          className: \"pt-2 text-stone-900 hover:cursor-help peer text-sm sm:text-base lg:text-lg \",\n          children: \"Allow non-strict mode for custom-named urls \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \" invisible peer-hover:visible opacity-0 peer-hover:opacity-100 duration-300   bg-stone-900 w-3/4 lg:w-1/2  py-1 px-2 text-center rounded-2xl text-white text-sm  transition-all ease-in absolute left-0 -top-full\",\n          children: \"Add characters at the end of your url if your custom url has already been taken.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"accent-primary-green\",\n          type: \"checkbox\",\n          name: \"allowMod\",\n          checked: data.allowMod,\n          onChange: handleCheck\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-validation z-0 self-center lg:text-lg\",\n        type: \"submit\",\n        children: \"Make it SMOL !\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n_s(UrlForm, \"BO8djfO5KTh9AXTiek9qSVA8Hc0=\");\n_c = UrlForm;\nexport default UrlForm;\nvar _c;\n$RefreshReg$(_c, \"UrlForm\");","map":{"version":3,"names":["React","Component","useState","url_schema","axios","UrlPairs","Joi","require","UrlForm","props","data","setData","url","alias","allowMod","errors","setErrors","schema","handleChange","currentTarget","input","name","value","handleCheck","checkBox","handleSubmit","event","preventDefault","lastUrl","validateAsync","abortEarly","res","post","add_url_to_list","setLastUrl","err","console","log","details","forEach","error","context","label","message"],"sources":["/home/janxa/Bureau/Projets/Smol/smol/client/src/components/UrlForm.jsx"],"sourcesContent":["import React, { Component, useState } from \"react\";\nimport { url_schema } from \"../joi_schemas/url_schema\";\nimport axios from \"axios\";\nimport UrlPairs from \"./UrlPairs\";\nconst Joi = require(\"joi\");\n\nfunction UrlForm(props) {\n  const [data,setData] = useState( { url: \"\", alias: \"\", allowMod: false });\n  const [errors,setErrors]=useState({})\n  const schema = url_schema;\n  const handleChange = ({ currentTarget: input }) => {\n    setData( (data)=>{\n      return{\n        ...data,\n        [input.name]:input.value\n      }\n    } );\n  };\n  const handleCheck = ({ currentTarget: checkBox }) => {\n    setData( (data)=>{\n      return{\n        ...data,\n        [checkBox.name]:!data.allowMod\n      }\n    } );\n\n  };\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    let errors = {};\n    let lastUrl = {};\n    try {\n      await schema.validateAsync(\n        {\n          url: data[\"url\"],\n          alias: data[\"alias\"],\n        },\n        { abortEarly: false }\n      );\n      const res = await axios.post(\"/api/shortner/generate\", data);\n      props.add_url_to_list(res.data);\n      lastUrl = res.data;\n      props.setLastUrl(lastUrl );\n      setData({ url: \"\", alias: \"\", allowMod: false })\n    } catch (err) {\n      console.log(err);\n      err.details.forEach(\n        (error) => (errors[error.context.label] = error.message)\n      );\n    }\n    setErrors(errors )\n  };\n  return ( \n    \n    <section className=\" bg-stone-200 w-10/12 p-4 m-4 rounded-md shadow-sm md:w-9/12 lg:w-2/3  \">\n   \n        <form onSubmit={handleSubmit} className=\"flex flex-col\">\n          <label htmlFor=\"url\" className=\"pt-2 text-lg lg:text-xl lg:pt-4 text-stone-900\">Enter the url you want to shorten :</label>\n          <input\n            className={errors['url'] ?\"input-invalid\" : \"input\"}\n            value={data.url}\n            onChange={handleChange}\n            name=\"url\"\n            type=\"text\"\n          />\n          {errors['url']  && <p className=\"error-label\">{errors[\"url\"]}</p>}\n          <label htmlFor=\"alias\" className=\"pt-2 lg:text-xl lg:pt-4 text-stone-900\">Customize your url :</label>\n          <input\n            className={errors['alias'] ? \"input-invalid\" :\"input\"}\n            value={data.alias}\n            onChange={handleChange}\n            name=\"alias\"\n            type=\"text\"\n            />\n            {errors['alias']&& <p  className=\"error-label\">{errors[\"alias\"]}</p>}\n          \n          <div className=\"py-2 z-0 relative\"> \n            <label htmlFor=\"allowmod\" className=\"pt-2 text-stone-900 hover:cursor-help peer text-sm sm:text-base lg:text-lg \">Allow non-strict mode for custom-named urls </label>\n            <span className=\" invisible peer-hover:visible opacity-0 peer-hover:opacity-100 duration-300   bg-stone-900 w-3/4 lg:w-1/2  py-1 px-2 text-center rounded-2xl text-white text-sm  transition-all ease-in absolute left-0 -top-full\">Add characters at the end of your url if your custom url has already been taken.</span>\n          <input\n            className=\"accent-primary-green\"\n            type=\"checkbox\"\n            name=\"allowMod\"\n            checked={data.allowMod}\n            onChange={handleCheck}\n          />\n          </div>\n         \n\n          <button className=\"btn-validation z-0 self-center lg:text-lg\"type=\"submit\">Make it SMOL !</button>\n        </form>\n      </section>\n    \n  );\n}\n\nexport default UrlForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}